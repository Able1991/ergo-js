<!DOCTYPE html>
<html class="js canvas canvastext geolocation rgba hsla no-multiplebgs borderimage borderradius boxshadow opacity no-cssanimations csscolumns no-cssgradients no-cssreflections csstransforms no-csstransforms3d no-csstransitions  video audio cufon-active fontface cufon-ready">
<head>
	<meta charset="utf-8" />
	
	
		<!-- STYLES -->
	
		<link rel="stylesheet/less" href="css/ergo-js.less" type="text/x-less" />

		<link rel="stylesheet/less" href="themes/default/ergo-theme.less" type="text/-less" />

		<link rel="stylesheet/less" href="iconsets/font-awesome/less/font-awesome.less" type="text/css" />

		<script src="lib/misc/less-1.3.1.min.js" type="text/javascript"></script>

		<script src="lib/misc/jquery-1.8.2.min.js" type="text/javascript"></script>
		<script src="build/ergo-js-0.9.2.js" type="text/javascript"></script>

		<script src="plugins/ergo-growl/ergo-growl.js" type="text/javascript"></script>
		
    <!--script src="http://api-maps.yandex.ru/2.0-stable/?load=package.standard&lang=ru-RU" type="text/javascript"></script-->
	
	
	<style type="text/css">
		
		body {
			padding: 20px;
		}
		
		
		
	</style>
	
</head>
<body>
	
	
<script type="text/javascript">
	

var GridData = Ergo.data.AjaxCollection.extend({
	
	defaults: {
		url: 'samples/ajax/randomdata.csv',
		ajax: {
			dataType: 'text'
		}
	},

	
	parse: function(csv) {
		
		var list = csv.split('\n');
		
		
		this.options.totalCount = list.length;
		
		// Эмулируем загрузку набора данных
		var data = [];
		
		var to = Math.min(list.length, this.options.to);
		
		for(var i = 0; i < 30; i++) {
			
			var a = list[i].split('|');			
			
			data.push({
				id: a[0],
				name: a[1],
				email: a[2],
				date: a[3]
			});
		}
		
		return data;
	}	
	
});

	
var gridData = new GridData();


	
	
var w = $.ergo({
	etype: 'panel',
	renderTo: 'body',
	width: 600,
	height: 300,
	title: 'Грид',
	cls: 'widget',
	style: {'margin-bottom': 20},

	data: gridData,
	
//	autoFetch: true,
	
	content: {
		
		etype: 'table-grid',
		
		components: {
			header: {
				content: {
					cell: {
						layout: {
							html: '<span/>'
						}				
					}
				}
			}
		},
		
		
		cell: {
			layout: {
				html: '<span/>'
			}
		},
		
		content: {
			mixins: ['scrollable'],
			style: {'padding-right': 13, 'overflow': 'hidden'}
		},
		
		columns: [{
			dataId: 'id',
			header: 'ID',
			width: 30
		}, {
			dataId: 'name',
			header: 'Имя'
		}, {
			dataId: 'email',
			header: 'E-mail'
		}]
		
	}
	
});	


gridData.fetch().then(function(){
	w.$layoutChanged();	
});








var w = $.ergo({
	etype: 'panel',
	renderTo: 'body',
	width: 600,
	height: 300,
	title: 'Грид + постраничная загрузка',
	cls: 'widget',
	style: {'margin-bottom': 20},
	
	
	content: {
		
		
		
		
	}

});




</script>
</body>