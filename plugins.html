<!DOCTYPE html>
<html class="js canvas canvastext geolocation rgba hsla no-multiplebgs borderimage borderradius boxshadow opacity no-cssanimations csscolumns no-cssgradients no-cssreflections csstransforms no-csstransforms3d no-csstransitions  video audio cufon-active fontface cufon-ready">
<head>
	<meta charset="utf-8" />
	
	
		<!-- STYLES -->
	
		<link rel="stylesheet/less" href="samples/css/ergo-js.less" type="text/css" />
		<link rel="stylesheet/less" href="themes/default/ergo-theme.less" type="text/css" />

		<link rel="stylesheet/less" href="iconsets/font-awesome/less/font-awesome.less" type="text/css" />

		<script src="lib/misc/less-1.3.0.min.js" type="text/javascript"></script>
	

		<script src="lib/misc/jquery-1.8.2.min.js" type="text/javascript"></script>
		<script src="build/ergo-js.js" type="text/javascript"></script>
		
		<script src="plugins/ajax-tree/ajax-tree.js" type="text/javascript"></script>
	
		<script src="plugins/ajax-grid/ajax-grid.js" type="text/javascript"></script>
	
</head>
<body>
	
	
<script type="text/javascript">
	
$(document).ready(function(){
	
	
	var treeData = new Ergo.plugins.tree.NodeCollection([], {path: 'plugins/ajax-tree/ajax/tree'});
	
	
	
	$.ergo({
		etype: 'panel',
		renderTo: 'body',
		width: 600,
		height: 300,
		title: 'Дерево (ajax)',
		cls: 'widget',
		style: {'margin-bottom': 20},
		
		content: {
			etype: 'ajax-tree',
			data: treeData,
			
			node: {
				onDataChanged: function() {
					var v = this.getValue();
					this.content.opt('icon', v.children ? 'icon-folder-close' : 'icon-file' );
				}
			}
							
		}		
		
	});
	
	treeData.fetch('plugins/ajax-tree/ajax/tree/0');
	
	
	
	
	
	var gridData = new Ergo.data.AjaxCollection([], {path: 'plugins/ajax-grid/ajax/0'});
	
	var grid = $.ergo({
		etype: 'ajax-grid-panel',
		renderTo: 'body',
		width: 600,
		height: 300,
		title: 'Таблица (ajax)',
		cls: 'widget',
		
		data: gridData,
		
		components: {
			header: {
				tools: ['Добавить', 'Удалить', 'Обновить']
			}
		},
		
		
		content: {
			columns: [{
				dataId: 'id',
				header: 'ID'
			}, {
				dataId: 'name',
				header: 'Имя'
			}, {
				dataId: 'post',
				header: 'Должность'
			}, {
				dataId: 'department',
				header: 'Подразделение'
			}]
		}
		
		
	});
	
	gridData.fetch().then(function(){
		grid.$layoutChanged();
	});
	
	
	
	
	/**
	 * 
	 * 
	 */
	
	$.ergo({
		etype: 'panel',
		renderTo: 'body',
		style: {'margin-top': 20},
		title: 'Панель инструметов',
		
		content: {
			cls: 'e-tool-box',
			layout: 'hbox',
			items: [{
				etype: 'button-item',
				text: 'Печать',
				icon: 'icon-print'
			}, {
				etype: 'button-group',
				defaultItem: {
					etype: 'button'
				},
				items: ['Добавить', 'Удалить', 'Изменить']
			}, {
				cls: 'e-splitter'
			}, {
				etype: 'grid-paginator'
			}]
		}
		
	});
	
	
	
});	
	
	
</script>	
	
</body>
</html>