<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>

		<!-- jQuery -->
		<script type="text/javascript" src="../lib/misc/jquery-1.4.2.min.js"></script>
		<!-- DinoJS -->
		<script type="text/javascript" src="../build/dino-js.js"></script>
		<link rel="stylesheet" type="text/css" href="../build/css/dino-js.css">
		<link rel="stylesheet" type="text/css" href="../build/css/dino-theme-default.css">
		<!-- jQuery UI theme -->
		<link rel="stylesheet" type="text/css" href="../themes/smoothness/jquery-ui-theme.css">
		<!-- SHJS -->
		<script type="text/javascript" src="../lib/shjs/sh_main.min.js"></script>
		<script type="text/javascript" src="../lib/shjs/lang/sh_javascript.min.js"></script>
		<link rel="stylesheet" type="text/css" href="../lib/shjs/css/sh_emacs.min.css">

		<link rel="stylesheet" type="text/css" href="css/sample.css">
		<script type="text/javascript" src="js/sample.js"></script>


	<style>
		
			.menu {
/*				width: 70px;
				padding: 10px;*/
				font-size: 0.8em;
				margin-top: 10px;
				position: relative;
			}
			
			.submenu {
/*				margin-left: 20px;*/
			}
			
			.menu-item {
				border-bottom: 1px dotted #aaaaaa;
				cursor: pointer;
			}
			
			.menu-item-label {
				margin-right: 20px;
				margin-left: 5px;
			}
			
			.menu-item:hover {
				background-color: #e0e0e0;
			}

			.menu-item-icon {
				background-position: 32px 32px;				
			}
			
			.has-submenu > .menu-item-icon {
				background-position: -32px -16px;
			}
			
			
			.context-menu {
				background-color: white;
				cursor: default;
				z-index: 1000;
			}
		
			.context-menu-item {
				border-bottom: 1px dotted #aaaaaa;
				cursor: pointer;
				padding: 0 5px;
			}
			
			.context-menu-item:hover {
				background-color: #e0e0e0;
			}
		
			.dino-growl-box {
				background-color: #f8f8f8;
				right: 20px;
				top: 20px;
				padding: 10px;
			}
		
			.preview-text {
				position: relative;
				font-size: 2em;
				color: #f0f0f0;
				text-align: center;
				cursor: default;
			}
		
	</style>


</head>
<body>


<div id="desc-1" class="desc">
	
	<p>Это черновой вариант меню</p>
	
	<pre class="sh_javascript">
// Модель меню
var menuModel = {
  dropdown: {
    cls: 'dino-border',
    effects: {
      show: 'fade',
      hide: 'default',
      delay: 300
    }
  },
  item: {
    dtype: 'text-menu-item',
    cls: 'menu-item',
    items: [{
      dtype: 'icon',
      position: 'right',
      cls: 'ui-icon menu-item-icon'
    }, {
      cls: 'menu-item-label'
    }],
    onAction: function(){
      growl.show('Выбран элемент меню: ' + this.options.label);
      this.hideSubmenu(true);
    }
  }		
};

// Виджет меню
Dino.widget({
  dtype: 'box',
  cls: 'menu',
  style: {'position': 'absolute'},
  defaultItem: Dino.override({submenuModel: menuModel}, menuModel.item),
  items: [{
    label: 'Menu 1',
    submenuItem: {width: 90},
    submenu: [
      {label: 'Submenu 1'},
      {label: 'Submenu 2'},
      {label: 'Submenu 3'},
      {
        label: 'Submenu 4',
        submenuItem: {width: 150},
        submenu: [
          {
            label: 'Submenu1',
            submenuItem: {width: 110},
            submenu: [
              {label: 'Submenu AAAA'}
            ]
          },
          {label: 'Submenu2 Submenu2'}
        ]
      }
    ]
  }, 
  { label: 'Menu 2' }, 
  { label: 'Menu 3' }
  ]
});	
	</pre>
	
</div>



<div id="desc-2" class="desc">
	
	<p>
		Это тоже черновой вариант, созданный на основе <strong></>Dino.containers.DropDownBox</strong>.
	</p>
	
	<pre class="sh_javascript">
				
Dino.widget({
  dtype: 'box',
  items: [{
    dtype: 'dropdown-box',
    cls: 'dino-border context-menu',
    events: {
      'click': function(e) {
        e.stopPropagation();
      }
    },
    defaultItem: {
      dtype: 'text-menu-item',
      cls: 'context-menu-item',
      onAction: function() {
        $('.context-menu').dino().hide();
        growl.show('Выбран элемент меню: ' + this.options.label);
      }
    },
    items: [
      {label: 'Item 1'},
      {label: 'Item 2'},
      {label: 'Item 3'},
    ]
  }, {
    text: 'Кликни правой кнопкой мыши в любом месте окна',
    cls: 'preview-text'
  }]
});
	</pre>
	
</div>





<div id="desc-3" class="desc">
	
	<p>
	</p>
	
	<pre class="sh_javascript">
// Модель меню
var menuModel = {
  dropdown: {
    effects: {
      show: 'fade',
      hide: 'fade',
      delay: 300
    }
  },
  item: {
    dtype: 'text-menu-item',
    cls: 'menu-item',
    items: [{
      dtype: 'icon',
      position: 'right',
      cls: 'ui-icon menu-item-icon'
    }, {
      cls: 'menu-item-label'
    }]
  }		
};

// Виджет меню
Dino.widget({
  dtype: 'box',
  cls: 'menu',
  style: {'position': 'absolute'},
  defaultItem: {
    dtype: 'menu-item',
    showOnEnter: false,
    content: {
      dtype: 'pulse-button',
      imageWidth: 30,
      pulseValue: 1.25,
      pulseDelay: 200,
      onAfterPulseUp: function(){
        if(this.parent.submenu && this.parent.hoverSubmenu){
          this.parent.showSubmenu();
        }
      },
      onBeforePulseDown: function(e){
        if(this.parent.submenu){
          e.cancel();
        }
      }
    },

    onSubmenuHide: function(){
      this.content.pulseDown();
    },
		
    submenuModel: menuModel
	},
  items: [{
    content: {imageUrl: 'img/menu/Box.png'},
    submenuItem: {width: 90},
    submenu: [
      {label: 'Submenu 1'},
      {label: 'Submenu 2'},
      {label: 'Submenu 3'}
    ]
  }, 
  { 
    content: {imageUrl: 'img/menu/Calander.png'},
    submenuItem: {width: 90},
    submenu: [
      {label: 'Submenu B 1'},
      {label: 'Submenu B 2'},
      {label: 'Submenu B 3'}
    ]
	}, 
  { content: {imageUrl: 'img/menu/Clock.png'} }
  ]
});	

	</pre>
	
</div>







<script>
	
		Dino.samples.build({
			widgets: [{
				id: 'menu1',
				label: 'Вертикальное меню',
				preview: eval($("#desc-1 .sh_javascript").text()),
				description: { wrapEl: $('#desc-1') }				
			}, {
				id: 'menu2',
				label: 'Контекстное меню',
				preview: eval($("#desc-2 .sh_javascript").text()),
				description: { wrapEl: $('#desc-2') }				
			}, {
				id: 'menu3',
				label: 'Нестандартные элементы меню',
				preview: eval($("#desc-3 .sh_javascript").text()),
				description: { wrapEl: $('#desc-3') }				
			}]
		});	
		
		
		
		$('#menu2 .preview').mousedown(function(e){

			if(e.button == 2){

				var dropdown = $('.dino-dropdown-box', this).dino();
							
				var offset = $(this).offset();
				
				var x = e.pageX - offset.left - 2;
				var y = e.pageY - offset.top - 2;
				
				dropdown.show(x, y);
				
				e.stopPropagation();
				
				$('body').one('click', function(){ dropdown.hide(); });
			
			}
		});
		
		$('#menu2 .preview').bind('contextmenu', function(){ return false; });
		
	
</script>


</body>
</html>