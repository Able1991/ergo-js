<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>DinoJS: Виджеты</title>

		<!-- jQuery -->
		<script type="text/javascript" src="../lib/misc/jquery-1.4.2.min.js"></script>
		<!-- DinoJS -->
		<script type="text/javascript" src="../build/dino-js.js"></script>
		<link rel="stylesheet" type="text/css" href="../build/dino-js.css">
		<!-- DinoJS theme -->
		<link rel="stylesheet" type="text/css" href="../themes/default/dino-theme.css">
		<!-- jQuery UI theme -->
		<link rel="stylesheet" type="text/css" href="../themes/smoothness/jquery-ui-theme.css">
		<!-- SHJS -->
		<script type="text/javascript" src="../lib/shjs/sh_main.min.js"></script>
		<script type="text/javascript" src="../lib/shjs/lang/sh_javascript.min.js"></script>
		<script type="text/javascript" src="../lib/shjs/lang/sh_css.min.js"></script>
		<script type="text/javascript" src="../lib/shjs/lang/sh_html.min.js"></script>
		<link rel="stylesheet" type="text/css" href="../lib/shjs/css/sh_emacs.min.css">

		<link rel="stylesheet" type="text/css" href="css/template2.css">
		<script type="text/javascript" src="js/template2.js"></script>


</head>
<body>



<div id="sample1">
	
<style>
	
.state-boxes > div {
	margin: 3px;
}	
	
.colored-box {
	background-color: #e0ffe0;
	text-align: center;
	padding: 0;
	cursor: pointer;
	font-size: 0.8em;
}

.colored-box-click {
	background-color: #ffe0e0;
}

.red-text {
	color: red;
}

.blue-text {
	color: blue;
}

</style>

<script>
$.dino({
  dtype: 'box',
  cls: 'state-boxes',
  items: [{
    baseCls: 'colored-box',
    text: 'Кликни по мне',
    width: 100,
    height: 100,
    events: {
      'click': function(e, w) { w.states.toggle('click'); }
    },
    onStateChanged: function() {
      message.info('Состояние изменилось');
    }
  }, {
    width: 100,
    height: 100,
    text: 'Lorem ipsum',
    cls: 'dino-border-all',
    states: {
      'hover': ['red-text', 'blue-text'],
      'init': 'blue-text'
    },
    state: 'init'
  }]
});
</script>
<div class="html">
	
</div>
<div class="desc">
	<p>
		Переключение состояний это просто добавление/удаление классов, имеющих специальные имена. 
		Метод <strong>toggle</strong> в действительности вызывает метод <strong>jQuery.toggleClass</strong> и является лишь формой упрощенной записи.
	</p>
	<p>
		При смене состояний вызывается событие <strong>onStateChanged</strong>.
	</p>
	<p>
		Классы состояний задаются в блоке <strong>states</strong>. Если же в качестве состояния задан массив, то первый его элемент должен содержать
		те классы, которые должны быть включены при активировании состояния, а второй элемент - классы, которые должны быть выключены. Если класс не
		указан, но было вызвано переключение состояния (первый бокс в примере), имя класса состояния определяется как 
		&quot;[baseCls]-[состояние]&quot;
	</p>
</div>	
	
	
</div>


<!-- Sample 2 -->

<div id="sample2">
	
<style>
.colored-box {
	background-color: #e0ffe0;
	text-align: center;
	padding: 0;
	cursor: pointer;
	font-size: 0.8em;
}

.colored-box.hover {
	background-color: #ffffe0;
}
	
</style>

<script>	
new Dino.Widget('<div/>', {
  baseCls: 'colored-box',
  text: 'Наведи на меня курсор',
  width: 100,
  height: 100,
  events: {
    'mouseenter': function(e, w) { w.events.fire('onCustomAction1'); },
    'mouseleave': function(e, w) { w.events.fire('onCustomAction2'); }
  },
  onCustomAction1: function() {
    this.states.set('hover');
  },
  onCustomAction2: function() {
    this.states.clear('hover');
  }
});		
</script>
<div class="html">
	
</div>
<div class="desc">
	<p>
		<strong>Dino</strong> использует механизм событий <strong>jQuery</strong> и свою собственную релизацию диспетчера событий в классе <strong>Dino.events.Observer</strong>. 
		Обработчики событий <strong>jQuery</strong> определяются в блоке <strong>events</strong>, обработчики внутренних событий начинаются с <strong>on</strong> и заглавной буквы, например <strong>onLoad</strong>.
	</p>
</div>	
	
	
</div>






<div id="sample3">
	
<style>
	
</style>

<script>
new Dino.Widget('<div/>', {
  width: 100,
  height: 100,
  cls: 'dino-border-all',
  layout: 'column-layout',
  components: {
    icon: {
      dtype: 'icon',
      cls: 'dino-icon-info dino-center-align',
      tag: 'Информация'
    },
    button: {
      dtype: 'button',
      cls: 'dino-center-align',
      label: 'кнопка',
      onAction: function() {
        message.info('Нажата кнопка для иконки ['+this.parent.icon.tag+']');
      }
    }
  }
});	
</script>
<div class="html">
	
</div>
<div class="desc">
	<p>
		Один из способов создания сложных виджетов - использование <strong>компонентов</strong> (components). В этом примере ипользуется бокс с двумя компонентами: иконкой
		и кнопкой. Для размещения компонентов можно воспользоваться стилями (назначая соответствующие классы нужным компонентам) или включить механизм 
		компоновок (layouts). Компоненты конструируемого виджета можно перегрузить своими параметрами, что обеспечивает большую гибкость при настройке внешнего вида 
		элементов страницы.
	</p>	
	<p>
		Компоненты на данный момент используют небезопасный (но с другой стороны удобный) способ подключения к виджету: каждый компонент является именованным свойством 
		виджета и доступен через оператор "."
	</p>
</div>	
	
	
</div>




<div id="sample-binding">
	
<style>
	
</style>

<script>
	
var personData = {
  name: 'Alice',
  age: 21,
  sex: 'female',
  status: 'on vacation'
};	
	
new Dino.containers.Box({
  width: 100,
  height: 100,
  layout: 'simple-form-layout',
  data: personData,
  items: [{
    dtype: 'text',
    dataId: 'name',
    label: 'Имя: '
  }, {
    dtype: 'textfield',
    dataId: 'age',
    label: 'Возраст: '		
  }, {
    dtype: 'icon',
    dataId: 'sex',
    label: 'Пол: ',
    optBinding: function(val){
      return {state: val};
    },
    states: {
      'female': 'led-icon-female'
    }
  }, {
    dtype: 'textarea',
    dataId: 'status',
    label: 'Статус: '
  }]
});	
</script>
<div class="html">
	
</div>
<div class="desc">
	<p>
	</p>	
</div>	
	
	
</div>






<script>
		
//	growl.show(Dino.samples.loremipsum);
	
	
samplePage([{
	name: 'Состояния (states)',
	id: '#sample1'
}, {
	name: 'События (events)',
	id: '#sample2'
}, {
	name: 'Компоненты и компоновка',
	id: '#sample3'
}, {
	name: 'Связывание с данными',
	id: '#sample-binding'
}]);
	
	
	
</script>

</body>
</html>